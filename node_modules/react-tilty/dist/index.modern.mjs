import e,{useState as t,useRef as n,useEffect as r,useCallback as o,useLayoutEffect as i}from"react";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const c="undefined"!=typeof window?i:r;export default({style:i={},className:l="",reverse:s=!1,max:u=35,perspective:d=1e3,easing:f="cubic-bezier(0.03,0.98,0.52,0.99)",speed:g=300,scale:m=1,axis:p,reset:w=!0,glare:h=!1,maxGlare:v=1,glareStyle:y={},gyroscope:M=!0,gyroscopeMinAngleX:x=-45,gyroscopeMaxAngleX:Y=45,gyroscopeMinAngleY:E=-45,gyroscopeMaxAngleY:X=45,onMouseEnter:b=(()=>{}),onMouseMove:A=(()=>{}),onMouseLeave:$=(()=>{}),onTiltChange:F=(()=>{}),children:L})=>{const[C,W]=t({position:"relative",willChange:"transform"}),[N,O]=t({position:"absolute",top:"50%",left:"50%",pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)",transformOrigin:"0% 0%",opacity:"0"}),T=n(0),q=n(0),z=n(0),j=n(0),I=n(null),P=n(null),k=s?1:-1,B=n(null);r(()=>()=>{I.current&&clearTimeout(I.current),"undefined"!=typeof window&&P.current&&window.cancelAnimationFrame(P.current)},[]),r(()=>{if(!h||"undefined"==typeof window)return()=>{};const e=()=>{const{current:e}=B;null!==e&&O(t=>a({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[h]),c(()=>{const{current:e}=B;null!==e&&O(t=>a({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth}))},[]);const G=()=>{const{current:e}=B;if(null!==e){const t=e.getBoundingClientRect();T.current=e.offsetWidth,q.current=e.offsetHeight,z.current=t.left,j.current=t.top}},H=o(e=>{let t=(e.clientX-z.current)/T.current,n=(e.clientY-j.current)/q.current;return t=Math.min(Math.max(t,0),1),n=Math.min(Math.max(n,0),1),{tiltX:(k*(u/2-t*u)).toFixed(2),tiltY:(k*(n*u-u/2)).toFixed(2),percentageX:100*t,percentageY:100*n,angle:Math.atan2(e.clientX-(z.current+T.current/2),-(e.clientY-(j.current+q.current/2)))*(180/Math.PI)}},[u,k]),R=o(e=>{const t=H(e);W(e=>a({},e,{transform:`perspective(${d}px) rotateX(${"x"===(null==p?void 0:p.toLowerCase())?0:t.tiltY}deg) rotateY(${"y"===(null==p?void 0:p.toLowerCase())?0:t.tiltX}deg) scale3d(${m}, ${m}, ${m})`})),h&&O(e=>a({},e,{transform:`rotate(${t.angle}deg) translate(-50%, -50%)`,opacity:t.percentageY*v/100})),B.current&&B.current.dispatchEvent(new CustomEvent("tiltChange",{detail:t})),F({detail:t}),P.current=null},[p,H,h,v,d,m,F]),S=()=>{I.current&&(clearTimeout(I.current),I.current=null),W(e=>a({},e,{transition:`${g}ms ${f}`})),I.current=setTimeout(()=>{W(e=>a({},e,{transition:""}))},g)};return r(()=>{if(!M)return()=>{};const e=e=>{if("undefined"==typeof window||!e.gamma||!e.beta)return;G();const t=(e.gamma-x)/((Y-x)/T.current),n=(e.beta-E)/((X-E)/q.current);null!==P.current&&window.cancelAnimationFrame(P.current);const r={clientX:t+z.current,clientY:n+j.current};P.current=requestAnimationFrame(()=>R(r))};return window.addEventListener("deviceorientation",e),()=>{window.removeEventListener("deviceorientation",e)}},[M,Y,X,x,E,R]),e.createElement("div",{ref:B,style:a({},i,C),className:l,onMouseEnter:e=>(G(),S(),b(e)),onMouseMove:e=>{e.persist(),null!==P.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(P.current);const t={clientX:e.clientX,clientY:e.clientY};return P.current=requestAnimationFrame(()=>R(t)),A(e)},onMouseLeave:e=>(S(),w&&"undefined"!=typeof window&&window.requestAnimationFrame(()=>{W(e=>a({},e,{transform:`perspective(${d}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})),h&&O(e=>a({},e,{transform:"rotate(180deg) translate(-50%, -50%)",opacity:0}))}),$(e))},h&&e.createElement("div",{className:"tilty-glare-wrapper",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{className:"tilty-glare",style:a({},y,N)})),L)};
//# sourceMappingURL=index.modern.mjs.map
