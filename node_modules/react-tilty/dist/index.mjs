import e,{useState as n,useRef as t,useEffect as r,useCallback as i,useLayoutEffect as o}from"react";function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}var u="undefined"!=typeof window?o:r;export default function(o){var c=o.style,l=void 0===c?{}:c,d=o.className,f=void 0===d?"":d,s=o.reverse,v=void 0!==s&&s,g=o.max,m=void 0===g?35:g,p=o.perspective,w=void 0===p?1e3:p,h=o.easing,y=void 0===h?"cubic-bezier(0.03,0.98,0.52,0.99)":h,M=o.speed,x=void 0===M?300:M,Y=o.scale,E=void 0===Y?1:Y,X=o.axis,b=o.reset,A=void 0===b||b,F=o.glare,L=void 0!==F&&F,C=o.maxGlare,W=void 0===C?1:C,N=o.glareStyle,O=void 0===N?{}:N,T=o.gyroscope,q=void 0===T||T,z=o.gyroscopeMinAngleX,j=void 0===z?-45:z,I=o.gyroscopeMaxAngleX,P=void 0===I?45:I,k=o.gyroscopeMinAngleY,B=void 0===k?-45:k,G=o.gyroscopeMaxAngleY,H=void 0===G?45:G,R=o.onMouseEnter,S=void 0===R?function(){}:R,D=o.onMouseMove,J=void 0===D?function(){}:D,K=o.onMouseLeave,Q=void 0===K?function(){}:K,U=o.onTiltChange,V=void 0===U?function(){}:U,Z=o.children,$=n({position:"relative",willChange:"transform"}),_=$[0],ee=$[1],ne=n({position:"absolute",top:"50%",left:"50%",pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)",transformOrigin:"0% 0%",opacity:"0"}),te=ne[0],re=ne[1],ie=t(0),oe=t(0),ae=t(0),ue=t(0),ce=t(null),le=t(null),de=v?1:-1,fe=t(null);r(function(){return function(){ce.current&&clearTimeout(ce.current),"undefined"!=typeof window&&le.current&&window.cancelAnimationFrame(le.current)}},[]),r(function(){if(!L||"undefined"==typeof window)return function(){};var e=function(){var e=fe.current;null!==e&&re(function(n){return a({},n,{width:2*e.offsetWidth,height:2*e.offsetWidth})})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[L]),u(function(){var e=fe.current;null!==e&&re(function(n){return a({},n,{width:2*e.offsetWidth,height:2*e.offsetWidth})})},[]);var se=function(){var e=fe.current;if(null!==e){var n=e.getBoundingClientRect();ie.current=e.offsetWidth,oe.current=e.offsetHeight,ae.current=n.left,ue.current=n.top}},ve=i(function(e){var n=(e.clientX-ae.current)/ie.current,t=(e.clientY-ue.current)/oe.current;return n=Math.min(Math.max(n,0),1),t=Math.min(Math.max(t,0),1),{tiltX:(de*(m/2-n*m)).toFixed(2),tiltY:(de*(t*m-m/2)).toFixed(2),percentageX:100*n,percentageY:100*t,angle:Math.atan2(e.clientX-(ae.current+ie.current/2),-(e.clientY-(ue.current+oe.current/2)))*(180/Math.PI)}},[m,de]),ge=i(function(e){var n=ve(e);ee(function(e){return a({},e,{transform:"perspective("+w+"px) rotateX("+("x"===(null==X?void 0:X.toLowerCase())?0:n.tiltY)+"deg) rotateY("+("y"===(null==X?void 0:X.toLowerCase())?0:n.tiltX)+"deg) scale3d("+E+", "+E+", "+E+")"})}),L&&re(function(e){return a({},e,{transform:"rotate("+n.angle+"deg) translate(-50%, -50%)",opacity:n.percentageY*W/100})}),fe.current&&fe.current.dispatchEvent(new CustomEvent("tiltChange",{detail:n})),V({detail:n}),le.current=null},[X,ve,L,W,w,E,V]),me=function(){ce.current&&(clearTimeout(ce.current),ce.current=null),ee(function(e){return a({},e,{transition:x+"ms "+y})}),ce.current=setTimeout(function(){ee(function(e){return a({},e,{transition:""})})},x)};return r(function(){if(!q)return function(){};var e=function(e){if("undefined"!=typeof window&&e.gamma&&e.beta){se();var n=(e.gamma-j)/((P-j)/ie.current),t=(e.beta-B)/((H-B)/oe.current);null!==le.current&&window.cancelAnimationFrame(le.current);var r={clientX:n+ae.current,clientY:t+ue.current};le.current=requestAnimationFrame(function(){return ge(r)})}};return window.addEventListener("deviceorientation",e),function(){window.removeEventListener("deviceorientation",e)}},[q,P,H,j,B,ge]),e.createElement("div",{ref:fe,style:a({},l,_),className:f,onMouseEnter:function(e){return se(),me(),S(e)},onMouseMove:function(e){e.persist(),null!==le.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(le.current);var n={clientX:e.clientX,clientY:e.clientY};return le.current=requestAnimationFrame(function(){return ge(n)}),J(e)},onMouseLeave:function(e){return me(),A&&"undefined"!=typeof window&&window.requestAnimationFrame(function(){ee(function(e){return a({},e,{transform:"perspective("+w+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}),L&&re(function(e){return a({},e,{transform:"rotate(180deg) translate(-50%, -50%)",opacity:0})})}),Q(e)}},L&&e.createElement("div",{className:"tilty-glare-wrapper",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{className:"tilty-glare",style:a({},O,te)})),Z)}
//# sourceMappingURL=index.mjs.map
