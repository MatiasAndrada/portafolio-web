!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e||self).reactTilty=t(e.react)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/t(e);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;return function(t){var o=t.style,u=void 0===o?{}:o,a=t.className,c=void 0===a?"":a,f=t.reverse,l=void 0!==f&&f,d=t.max,s=void 0===d?35:d,v=t.perspective,p=void 0===v?1e3:v,g=t.easing,m=void 0===g?"cubic-bezier(0.03,0.98,0.52,0.99)":g,w=t.speed,h=void 0===w?300:w,y=t.scale,M=void 0===y?1:y,b=t.axis,E=t.reset,x=void 0===E||E,Y=t.glare,X=void 0!==Y&&Y,A=t.maxGlare,C=void 0===A?1:A,L=t.glareStyle,F=void 0===L?{}:L,R=t.gyroscope,T=void 0===R||R,W=t.gyroscopeMinAngleX,j=void 0===W?-45:W,q=t.gyroscopeMaxAngleX,N=void 0===q?45:q,O=t.gyroscopeMinAngleY,k=void 0===O?-45:O,z=t.gyroscopeMaxAngleY,S=void 0===z?45:z,I=t.onMouseEnter,P=void 0===I?function(){}:I,B=t.onMouseMove,G=void 0===B?function(){}:B,H=t.onMouseLeave,D=void 0===H?function(){}:H,J=t.onTiltChange,K=void 0===J?function(){}:J,Q=t.children,U=e.useState({position:"relative",willChange:"transform"}),V=U[0],Z=U[1],$=e.useState({position:"absolute",top:"50%",left:"50%",pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)",transformOrigin:"0% 0%",opacity:"0"}),_=$[0],ee=$[1],te=e.useRef(0),ne=e.useRef(0),re=e.useRef(0),ie=e.useRef(0),oe=e.useRef(null),ue=e.useRef(null),ae=l?1:-1,ce=e.useRef(null);e.useEffect(function(){return function(){oe.current&&clearTimeout(oe.current),"undefined"!=typeof window&&ue.current&&window.cancelAnimationFrame(ue.current)}},[]),e.useEffect(function(){if(!X||"undefined"==typeof window)return function(){};var e=function(){var e=ce.current;null!==e&&ee(function(t){return r({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth})})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[X]),i(function(){var e=ce.current;null!==e&&ee(function(t){return r({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth})})},[]);var fe=function(){var e=ce.current;if(null!==e){var t=e.getBoundingClientRect();te.current=e.offsetWidth,ne.current=e.offsetHeight,re.current=t.left,ie.current=t.top}},le=e.useCallback(function(e){var t=(e.clientX-re.current)/te.current,n=(e.clientY-ie.current)/ne.current;return t=Math.min(Math.max(t,0),1),n=Math.min(Math.max(n,0),1),{tiltX:(ae*(s/2-t*s)).toFixed(2),tiltY:(ae*(n*s-s/2)).toFixed(2),percentageX:100*t,percentageY:100*n,angle:Math.atan2(e.clientX-(re.current+te.current/2),-(e.clientY-(ie.current+ne.current/2)))*(180/Math.PI)}},[s,ae]),de=e.useCallback(function(e){var t=le(e);Z(function(e){return r({},e,{transform:"perspective("+p+"px) rotateX("+("x"===(null==b?void 0:b.toLowerCase())?0:t.tiltY)+"deg) rotateY("+("y"===(null==b?void 0:b.toLowerCase())?0:t.tiltX)+"deg) scale3d("+M+", "+M+", "+M+")"})}),X&&ee(function(e){return r({},e,{transform:"rotate("+t.angle+"deg) translate(-50%, -50%)",opacity:t.percentageY*C/100})}),ce.current&&ce.current.dispatchEvent(new CustomEvent("tiltChange",{detail:t})),K({detail:t}),ue.current=null},[b,le,X,C,p,M,K]),se=function(){oe.current&&(clearTimeout(oe.current),oe.current=null),Z(function(e){return r({},e,{transition:h+"ms "+m})}),oe.current=setTimeout(function(){Z(function(e){return r({},e,{transition:""})})},h)};return e.useEffect(function(){if(!T)return function(){};var e=function(e){if("undefined"!=typeof window&&e.gamma&&e.beta){fe();var t=(e.gamma-j)/((N-j)/te.current),n=(e.beta-k)/((S-k)/ne.current);null!==ue.current&&window.cancelAnimationFrame(ue.current);var r={clientX:t+re.current,clientY:n+ie.current};ue.current=requestAnimationFrame(function(){return de(r)})}};return window.addEventListener("deviceorientation",e),function(){window.removeEventListener("deviceorientation",e)}},[T,N,S,j,k,de]),n.default.createElement("div",{ref:ce,style:r({},u,V),className:c,onMouseEnter:function(e){return fe(),se(),P(e)},onMouseMove:function(e){e.persist(),null!==ue.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(ue.current);var t={clientX:e.clientX,clientY:e.clientY};return ue.current=requestAnimationFrame(function(){return de(t)}),G(e)},onMouseLeave:function(e){return se(),x&&"undefined"!=typeof window&&window.requestAnimationFrame(function(){Z(function(e){return r({},e,{transform:"perspective("+p+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}),X&&ee(function(e){return r({},e,{transform:"rotate(180deg) translate(-50%, -50%)",opacity:0})})}),D(e)}},X&&n.default.createElement("div",{className:"tilty-glare-wrapper",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}},n.default.createElement("div",{className:"tilty-glare",style:r({},F,_)})),Q)}});
//# sourceMappingURL=index.umd.js.map
