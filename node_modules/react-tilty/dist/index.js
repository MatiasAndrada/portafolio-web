var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/t(e);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;module.exports=function(t){var o=t.style,u=void 0===o?{}:o,a=t.className,c=void 0===a?"":a,l=t.reverse,f=void 0!==l&&l,s=t.max,d=void 0===s?35:s,v=t.perspective,g=void 0===v?1e3:v,m=t.easing,p=void 0===m?"cubic-bezier(0.03,0.98,0.52,0.99)":m,w=t.speed,h=void 0===w?300:w,y=t.scale,M=void 0===y?1:y,E=t.axis,b=t.reset,x=void 0===b||b,Y=t.glare,X=void 0!==Y&&Y,A=t.maxGlare,C=void 0===A?1:A,L=t.glareStyle,F=void 0===L?{}:L,R=t.gyroscope,W=void 0===R||R,q=t.gyroscopeMinAngleX,N=void 0===q?-45:q,O=t.gyroscopeMaxAngleX,T=void 0===O?45:O,j=t.gyroscopeMinAngleY,k=void 0===j?-45:j,z=t.gyroscopeMaxAngleY,S=void 0===z?45:z,I=t.onMouseEnter,P=void 0===I?function(){}:I,B=t.onMouseMove,G=void 0===B?function(){}:B,H=t.onMouseLeave,D=void 0===H?function(){}:H,J=t.onTiltChange,K=void 0===J?function(){}:J,Q=t.children,U=e.useState({position:"relative",willChange:"transform"}),V=U[0],Z=U[1],$=e.useState({position:"absolute",top:"50%",left:"50%",pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)",transformOrigin:"0% 0%",opacity:"0"}),_=$[0],ee=$[1],te=e.useRef(0),ne=e.useRef(0),re=e.useRef(0),ie=e.useRef(0),oe=e.useRef(null),ue=e.useRef(null),ae=f?1:-1,ce=e.useRef(null);e.useEffect(function(){return function(){oe.current&&clearTimeout(oe.current),"undefined"!=typeof window&&ue.current&&window.cancelAnimationFrame(ue.current)}},[]),e.useEffect(function(){if(!X||"undefined"==typeof window)return function(){};var e=function(){var e=ce.current;null!==e&&ee(function(t){return r({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth})})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[X]),i(function(){var e=ce.current;null!==e&&ee(function(t){return r({},t,{width:2*e.offsetWidth,height:2*e.offsetWidth})})},[]);var le=function(){var e=ce.current;if(null!==e){var t=e.getBoundingClientRect();te.current=e.offsetWidth,ne.current=e.offsetHeight,re.current=t.left,ie.current=t.top}},fe=e.useCallback(function(e){var t=(e.clientX-re.current)/te.current,n=(e.clientY-ie.current)/ne.current;return t=Math.min(Math.max(t,0),1),n=Math.min(Math.max(n,0),1),{tiltX:(ae*(d/2-t*d)).toFixed(2),tiltY:(ae*(n*d-d/2)).toFixed(2),percentageX:100*t,percentageY:100*n,angle:Math.atan2(e.clientX-(re.current+te.current/2),-(e.clientY-(ie.current+ne.current/2)))*(180/Math.PI)}},[d,ae]),se=e.useCallback(function(e){var t=fe(e);Z(function(e){return r({},e,{transform:"perspective("+g+"px) rotateX("+("x"===(null==E?void 0:E.toLowerCase())?0:t.tiltY)+"deg) rotateY("+("y"===(null==E?void 0:E.toLowerCase())?0:t.tiltX)+"deg) scale3d("+M+", "+M+", "+M+")"})}),X&&ee(function(e){return r({},e,{transform:"rotate("+t.angle+"deg) translate(-50%, -50%)",opacity:t.percentageY*C/100})}),ce.current&&ce.current.dispatchEvent(new CustomEvent("tiltChange",{detail:t})),K({detail:t}),ue.current=null},[E,fe,X,C,g,M,K]),de=function(){oe.current&&(clearTimeout(oe.current),oe.current=null),Z(function(e){return r({},e,{transition:h+"ms "+p})}),oe.current=setTimeout(function(){Z(function(e){return r({},e,{transition:""})})},h)};return e.useEffect(function(){if(!W)return function(){};var e=function(e){if("undefined"!=typeof window&&e.gamma&&e.beta){le();var t=(e.gamma-N)/((T-N)/te.current),n=(e.beta-k)/((S-k)/ne.current);null!==ue.current&&window.cancelAnimationFrame(ue.current);var r={clientX:t+re.current,clientY:n+ie.current};ue.current=requestAnimationFrame(function(){return se(r)})}};return window.addEventListener("deviceorientation",e),function(){window.removeEventListener("deviceorientation",e)}},[W,T,S,N,k,se]),n.default.createElement("div",{ref:ce,style:r({},u,V),className:c,onMouseEnter:function(e){return le(),de(),P(e)},onMouseMove:function(e){e.persist(),null!==ue.current&&"undefined"!=typeof window&&window.cancelAnimationFrame(ue.current);var t={clientX:e.clientX,clientY:e.clientY};return ue.current=requestAnimationFrame(function(){return se(t)}),G(e)},onMouseLeave:function(e){return de(),x&&"undefined"!=typeof window&&window.requestAnimationFrame(function(){Z(function(e){return r({},e,{transform:"perspective("+g+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}),X&&ee(function(e){return r({},e,{transform:"rotate(180deg) translate(-50%, -50%)",opacity:0})})}),D(e)}},X&&n.default.createElement("div",{className:"tilty-glare-wrapper",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}},n.default.createElement("div",{className:"tilty-glare",style:r({},F,_)})),Q)};
//# sourceMappingURL=index.js.map
